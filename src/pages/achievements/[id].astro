---
import { AchievementSheet } from "../../components/AchievementSheet";

export const prerender = false; // これでSSRを有効化

const { id } = Astro.params;

// ページごとのデータを取得
const response = await fetch(`http://localhost:4321/api/achievements/${id}`);

// エラーハンドリング
if (!response.ok) {
  throw new Error(`Achievement with ID "${id}" not found.`);
}

// 成功した場合はデータをJSONとしてパース
const achievement = await response.json();

// コンソールにJSON形式で表示
console.log("Achievement Data:", JSON.stringify(achievement, null, 2));
---

<html>
  <head>
    <title>Achievement: {achievement.student_name}</title>
  </head>
  <body>
    <div id="app">
      <!-- Reactコンポーネントをここに挿入 -->
      <AchievementSheet data={achievement.data} />
    </div>
  </body>
</html>